#!/usr/bin/env ruby -w
# encoding: UTF-8
class C模块加载器
  @@模块名称_模块路径哈希 = {}
  def self.注册模块(模块名称, 模块路径, 立即加载 = false)
    @@模块名称_模块路径哈希[模块名称] = 模块路径
    加载模块(模块名称) if (立即加载)
  end
  def self.加载模块(输入)
    if 输入.类名 == 'String'
      加载单个模块(输入)
    elsif 输入.类名 == 'Array'
      输入.每个{|模块名称| 加载单个模块(模块名称)}
    end
  end
  def self.加载单个模块(模块名称)
    if @@模块名称_模块路径哈希.存在键?(模块名称)
      模块路径 = @@模块名称_模块路径哈希[模块名称]
      C脚本加载器.加载(模块路径)
    else
      引发异常('模块加载异常',"不存在模块: #{模块名称}")
    end
  end
end
